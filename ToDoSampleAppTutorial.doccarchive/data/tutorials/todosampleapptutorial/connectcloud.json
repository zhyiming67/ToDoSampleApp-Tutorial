{"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This tutorial guides you through connecting your local data to synchronize to a cloud backend."}]}],"kind":"hero","title":"Connect to the Cloud","chapter":"Cloud Connection","estimatedTimeInMinutes":10,"projectFiles":"ToDo.zip"},{"kind":"tasks","tasks":[{"anchor":"Provision-Backend","title":"Provision Backend","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You‚Äôll create an AWS AppSync API and configure DataStore to synchronize local data to it."}]}],"mediaPosition":"trailing","layout":"horizontal"}],"stepsSection":[{"code":"configure","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Configure Amplify to manage cloud resources on your behalf. Open a terminal window and run the command. This step will configure a new AWS user in your account for Amplify."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This command will open up a web browser to the AWS Management Console and guide you through creating a new IAM user. For step-by-step directions to set this up, refer to the CLI installation guide. "},{"type":"codeVoice","code":"\"https:\/\/docs.amplify.aws\/cli\/start\/install\""}]}],"type":"step","runtimePreview":null,"media":null},{"code":"init","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Initialize the Amplify backend. To do this, run the command and follow the step-by-step instructions."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"push","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Push your new backend to the cloud. To do this, run the command. Answer "},{"type":"codeVoice","code":"No"},{"type":"text","text":" to "},{"type":"codeVoice","code":"? Do you want to generate code for your newly created GraphQL API"},{"type":"text","text":". Answering "},{"type":"codeVoice","code":"Yes"},{"type":"text","text":" will generate an API.swift file which is only necessary when directly using the AWSAppSync SDK. When you‚Äôre using Amplify API or Amplify DataStore, you‚Äôll use the amplify codegen models command to generate Swift models."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Note: sit back and relax since this command will generate all the required cloud resources on your AWS account and it might take a while to complete."}]}],"type":"step","runtimePreview":null,"media":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Enable cloud syncing"}]},{"code":"AmplifyConfig1-1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You need to configure your application to use the Amplify API category. Open "},{"type":"codeVoice","code":"\"AmplifyConfig.swift\""},{"type":"text","text":"."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"AmplifyConfig2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Update the amplify initialization code to add the API plugin by uncommenting the codes."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now when you run your application, the data will be synced to your cloud backend automatically! üéâ"}]}]},{"anchor":"Add-a-Subscription","title":"Add a Subscription","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You‚Äôll add a subscription to the application, so that you can receive any updates to the ToDoItem model."}]}],"mediaPosition":"trailing","layout":"horizontal"}],"stepsSection":[{"code":"ToDoMainView2-1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Open "},{"type":"codeVoice","code":"\"ToDoMainView.swift\""},{"type":"text","text":"."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"ToDoMainView2-2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the import statement at the top of the file. Add a member variable in the body of the struct. Add the subscription codes to the body of the struct"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"ToDoMainView2-3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Update the body view to call "},{"type":"codeVoice","code":"\"subscribeTodos()\""},{"type":"text","text":" function."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Build and run"},{"type":"text","text":" the application. In the console output, you will see that you are making a websocket connection to receive updates any time there is a mutation to the ToDoItem model."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null}]},{"anchor":"Query-for-Mutations-Using-the-Console","title":"Query for Mutations Using the Console","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In this section, you will make a mutation using the app sync console and have our app receive that mutation over the websocket subscription.."}]}],"mediaPosition":"trailing","layout":"horizontal"}],"stepsSection":[{"code":"consoleApi","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Open a terminal window in your project‚Äôs directory. Run the command. When prompted, select GraphQL. This will open the AWS AppSync console."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"consoleQuery","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Copy and paste the query into the left pane."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Press the "},{"type":"codeVoice","code":"play"},{"type":"text","text":" button to run the query. This will return all of the synchronized ToDoItems in the right pane."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"consoleQuery.png"},{"type":"paragraph","inlineContent":[{"type":"text","text":"üëè In this tutorial, you created a functional ToDo application that persists data both locally on the device and in the cloud. You can download the complete ToDo project as "},{"type":"codeVoice","code":"\"Project files\""},{"type":"text","text":" at the beginning of this chapter. You need to provision backend to connect the app to the cloud."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now you are ready to start exploring additional Amplify categories to add to your application here! "},{"type":"codeVoice","code":"https:\/\/docs.amplify.aws\/start\/getting-started\/nextsteps\/q\/integration\/ios"}]}]}]}],"identifier":{"url":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud","interfaceLanguage":"swift"},"kind":"project","metadata":{"title":"Connect to the Cloud","categoryPathComponent":"Tutorial-Table-of-Contents","role":"project","category":"GettingStarted"},"hierarchy":{"modules":[{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/Set-Up-Fullstack-Project","projects":[{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Prerequisites","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Prerequisites#Prerequisites"}]},{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up#Create-a-New-iOS-Application"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up#Add-Amplify-to-Your-Application"}]}]},{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/DataStore-Essentials","projects":[{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Generate-Model-Files"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Add-Extension-for-Generated-Model-Files"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Configure-Amplify-and-DataStore"}]},{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Generate-a-DataStore-Manipulation-File"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Implement-the-ToDoEnvironment-Class"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Create-a-Logger-File"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Create-a-ToDoItem"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Update-a-ToDoItem"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Request-ToDoItems"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Remove-ToDoItems"}]}]},{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/UI-Integration","projects":[{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI#Create-UI-Components"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI#Create-Interfaces"}]}]},{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/Cloud-Connection","projects":[{"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud","sections":[{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Provision-Backend"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Add-a-Subscription"},{"kind":"task","reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Query-for-Mutations-Using-the-Console"}]}]}],"reference":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents","paths":[["doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents","doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/$volume","doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/Cloud-Connection"]]},"documentVersion":0,"references":{"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/ConnectCloud#Query-for-Mutations-Using-the-Console":{"role":"pseudoSymbol","title":"Query for Mutations Using the Console","abstract":[{"type":"text","text":"This tutorial guides you through connecting your local data to synchronize to a cloud backend."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Query-for-Mutations-Using-the-Console","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/connectcloud#Query-for-Mutations-Using-the-Console"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/GenerateModel":{"role":"project","title":"Configuration","estimatedTime":"10min","abstract":[{"type":"text","text":"This tutorial guides you through generating model files and initializing Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/generatemodel"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/UI#Create-UI-Components":{"role":"pseudoSymbol","title":"Create UI Components","abstract":[{"type":"text","text":"This tutorial guides you through builidng the interface of ToDo app and interacting with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI#Create-UI-Components","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/ui#Create-UI-Components"},"ToDoMainView2-3.swift":{"syntax":"swift","content":["import Amplify","import Combine","import SwiftUI","","\/\/\/ Homepage. Control Add button and TodoList.","public struct ToDoMainView: View {","    @EnvironmentObject var environment: ToDoEnvironment","","    let logger: Logger","    ","    public init(logger: Logger = DefaultLogger()) {","        self.logger = logger","    }","","    public var body: some View {","        NavigationView {","            if environment.toDoItems.isEmpty {","                ToDoBlankView()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","                    .sheet(isPresented: $environment.showingDetail) {","                        ToDoItemDetail()","                    }","            }","            else {","                ToDoList()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","            }","        }","        .onAppear {","            self.subscribeTodos()","        }","    }","    ","    @State var todoSubscription: AnyCancellable?","    ","    func subscribeTodos() {","        self.todoSubscription","            = Amplify.DataStore.publisher(for: ToDoItem.self)","            .sink(receiveCompletion: { completion in","                logger.info(\"Subscription has been completed: \\(completion)\")","            }, receiveValue: { mutationEvent in","                logger.info(\"Subscription got this value: \\(mutationEvent)\")","","                do {","                    let todo = try mutationEvent.decodeModel(as: ToDoItem.self)","","                    switch mutationEvent.mutationType {","                    case \"create\":","                        logger.info(\"Created: \\(todo)\")","                    case \"update\":","                        logger.info(\"Updated: \\(todo)\")","                    case \"delete\":","                        logger.info(\"Deleted: \\(todo)\")","                    default:","                        break","                    }","","                } catch {","                    logger.error(\"Model could not be decoded: \\(error)\")","                }","            })","    }","}","","struct ToDoMainView_Previews: PreviewProvider {","    static var previews: some View {","        let env = ToDoEnvironment()","        env.saveToDoItem(toDoItem: ToDoItem(text: \"Eat breakfast\"))","        return ToDoMainView().environmentObject(env)","    }","}"],"fileName":"ToDoMainView.swift","identifier":"ToDoMainView2-3.swift","type":"file","fileType":"swift","highlights":[{"line":51},{"line":52},{"line":53}]},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Request-ToDoItems":{"role":"pseudoSymbol","title":"Request ToDoItems","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Request-ToDoItems","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Request-ToDoItems"},"consoleQuery":{"syntax":"","content":[" query GetToDoItems {","     listToDoItems {","         items {","             id","             text","             priority","             completedAt","             _deleted","         }","     }"," }"],"fileName":"Query codes","identifier":"consoleQuery","type":"file","fileType":"","highlights":[]},"AmplifyConfig2.swift":{"syntax":"swift","content":["\/\/","\/\/  Main file including Amplify configuration","\/\/  AmplifyConfigTemplate","\/\/","\/\/  Created by AWS Amplify.","\/\/","import Amplify","import AWSDataStorePlugin","import AWSAPIPlugin","import SwiftUI","","@main","struct ToDo: App {","    let logger: Logger","    ","    public init() {","        self.logger = DefaultLogger()","        configureAmplify()","    }","    ","    var body: some Scene {","        WindowGroup {","            ToDoMainView().environmentObject(createEnvironment())","        }","    }","","    private func createEnvironment() -> ToDoEnvironment {","        let env = ToDoEnvironment()","        env.initTodo()","        return env","    }","","    \/\/\/Configure Amplify","    func configureAmplify() {","        let models = AmplifyModels()","        let apiPlugin = AWSAPIPlugin(modelRegistration: models)","        let dataStorePlugin = AWSDataStorePlugin(modelRegistration: models)","        do {","            try Amplify.add(plugin: apiPlugin)","            try Amplify.add(plugin: dataStorePlugin)","            try Amplify.configure()","            logger.info(\"Initialized Amplify\");","        } catch {","            assert(false, \"Could not initialize Amplify: \\(error)\")","        }","    }","","}"],"fileName":"AmplifyConfig.swift","identifier":"AmplifyConfig2.swift","type":"file","fileType":"swift","highlights":[{"line":36},{"line":39}]},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/Set-up":{"role":"project","title":"Set Up Your Application","estimatedTime":"5min","abstract":[{"type":"text","text":"This tutorial guides you through setting up an iOS application configured with Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/set-up"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Generate-a-DataStore-Manipulation-File":{"role":"pseudoSymbol","title":"Generate a DataStore Manipulation File","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Generate-a-DataStore-Manipulation-File","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Generate-a-DataStore-Manipulation-File"},"consoleApi":{"syntax":"","content":["amplify console api"],"fileName":"Command","identifier":"consoleApi","type":"file","fileType":"","highlights":[]},"configure":{"syntax":"","content":["amplify configure"],"fileName":"Command","identifier":"configure","type":"file","fileType":"","highlights":[]},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Create-a-ToDoItem":{"role":"pseudoSymbol","title":"Create a ToDoItem","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Create-a-ToDoItem","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Create-a-ToDoItem"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/ConnectCloud#Provision-Backend":{"role":"pseudoSymbol","title":"Provision Backend","abstract":[{"type":"text","text":"This tutorial guides you through connecting your local data to synchronize to a cloud backend."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Provision-Backend","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/connectcloud#Provision-Backend"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/Set-up#Create-a-New-iOS-Application":{"role":"pseudoSymbol","title":"Create a New iOS Application","abstract":[{"type":"text","text":"This tutorial guides you through setting up an iOS application configured with Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up#Create-a-New-iOS-Application","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/set-up#Create-a-New-iOS-Application"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/Prerequisites#Prerequisites":{"role":"pseudoSymbol","title":"Prerequisites","abstract":[{"type":"text","text":"This tutorial guides you through preparation for building an iOS App with Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Prerequisites#Prerequisites","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/prerequisites#Prerequisites"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/UI#Create-Interfaces":{"role":"pseudoSymbol","title":"Create Interfaces","abstract":[{"type":"text","text":"This tutorial guides you through builidng the interface of ToDo app and interacting with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI#Create-Interfaces","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/ui#Create-Interfaces"},"AmplifyConfig1-1.swift":{"syntax":"swift","content":["\/\/","\/\/  Main file including Amplify configuration","\/\/  AmplifyConfigTemplate","\/\/","\/\/  Created by AWS Amplify.","\/\/","import Amplify","import AWSDataStorePlugin","import AWSAPIPlugin","import SwiftUI","","@main","struct ToDo: App {","    let logger: Logger","    ","    public init() {","        self.logger = DefaultLogger()","        configureAmplify()","    }","    ","    var body: some Scene {","        WindowGroup {","            ToDoMainView().environmentObject(createEnvironment())","        }","    }","","    private func createEnvironment() -> ToDoEnvironment {","        let env = ToDoEnvironment()","        env.initTodo()","        return env","    }","","    \/\/\/Configure Amplify","    func configureAmplify() {","        let models = AmplifyModels()","        \/\/    let apiPlugin = AWSAPIPlugin(modelRegistration: models)","        let dataStorePlugin = AWSDataStorePlugin(modelRegistration: models)","        do {","            \/\/        try Amplify.add(plugin: apiPlugin)","            try Amplify.add(plugin: dataStorePlugin)","            try Amplify.configure()","            logger.info(\"Initialized Amplify\");","        } catch {","            assert(false, \"Could not initialize Amplify: \\(error)\")","        }","    }","","}"],"fileName":"AmplifyConfig.swift","identifier":"AmplifyConfig1-1.swift","type":"file","fileType":"swift","highlights":[]},"init":{"syntax":"","content":["amplify init"],"fileName":"Command","identifier":"init","type":"file","fileType":"","highlights":[{"line":1}]},"consoleQuery.png":{"alt":"console query demo","type":"image","identifier":"consoleQuery.png","variants":[{"url":"\/images\/consoleQuery.png","size":{"width":2886,"height":1858},"traits":["1x","light"]}]},"ToDo.zip":{"checksum":"75e9903a1473c9b0ed7f15a8b492d87199f558441b8e30057b2c8d73061c11cedd7c691ab4ccffe500b81233c73d93383ad63bb8b09998d9bfd952e05d792803","type":"download","identifier":"ToDo.zip","url":"\/downloads\/ToDo.zip"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation":{"role":"project","title":"Data Manipulation","estimatedTime":"15min","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/datamanipulation"},"ToDoMainView2-1.swift":{"syntax":"swift","content":["import Amplify","import SwiftUI","","\/\/\/ Homepage. Control Add button and TodoList.","public struct ToDoMainView: View {","    @EnvironmentObject var environment: ToDoEnvironment","","    let logger: Logger","    ","    public init(logger: Logger = DefaultLogger()) {","        self.logger = logger","    }","","    public var body: some View {","        NavigationView {","            if environment.toDoItems.isEmpty {","                ToDoBlankView()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","                    .sheet(isPresented: $environment.showingDetail) {","                        ToDoItemDetail()","                    }","            }","            else {","                ToDoList()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","            }","        }","    }","}","","struct ToDoMainView_Previews: PreviewProvider {","    static var previews: some View {","        let env = ToDoEnvironment()","        env.saveToDoItem(toDoItem: ToDoItem(text: \"Eat breakfast\"))","        return ToDoMainView().environmentObject(env)","    }","}"],"fileName":"ToDoMainView.swift","identifier":"ToDoMainView2-1.swift","type":"file","fileType":"swift","highlights":[]},"doc://Amazon.ToDoSampleAppTutorial/tutorials/Tutorial-Table-of-Contents":{"role":"overview","title":"Meet Amplify!","abstract":[{"type":"text","text":"In this tutorial, you will:"}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents","kind":"overview","type":"topic","url":"\/tutorials\/tutorial-table-of-contents"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Remove-ToDoItems":{"role":"pseudoSymbol","title":"Remove ToDoItems","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Remove-ToDoItems","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Remove-ToDoItems"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/Tutorial-Table-of-Contents/UI-Integration":{"role":"article","title":"UI Integration","abstract":[],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/UI-Integration","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/ui-integration"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/Prerequisites":{"role":"project","title":"Prerequisites","estimatedTime":"5min","abstract":[{"type":"text","text":"This tutorial guides you through preparation for building an iOS App with Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Prerequisites","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/prerequisites"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Create-a-Logger-File":{"role":"pseudoSymbol","title":"Create a Logger File","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Create-a-Logger-File","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Create-a-Logger-File"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/GenerateModel#Add-Extension-for-Generated-Model-Files":{"role":"pseudoSymbol","title":"Add Extension for Generated Model Files","abstract":[{"type":"text","text":"This tutorial guides you through generating model files and initializing Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Add-Extension-for-Generated-Model-Files","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/generatemodel#Add-Extension-for-Generated-Model-Files"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Update-a-ToDoItem":{"role":"pseudoSymbol","title":"Update a ToDoItem","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Update-a-ToDoItem","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Update-a-ToDoItem"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/Set-up#Add-Amplify-to-Your-Application":{"role":"pseudoSymbol","title":"Add Amplify to Your Application","abstract":[{"type":"text","text":"This tutorial guides you through setting up an iOS application configured with Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/Set-up#Add-Amplify-to-Your-Application","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/set-up#Add-Amplify-to-Your-Application"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/UI":{"role":"project","title":"Implement UI","estimatedTime":"15min","abstract":[{"type":"text","text":"This tutorial guides you through builidng the interface of ToDo app and interacting with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/UI","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/ui"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/GenerateModel#Generate-Model-Files":{"role":"pseudoSymbol","title":"Generate Model Files","abstract":[{"type":"text","text":"This tutorial guides you through generating model files and initializing Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Generate-Model-Files","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/generatemodel#Generate-Model-Files"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/ConnectCloud#Add-a-Subscription":{"role":"pseudoSymbol","title":"Add a Subscription","abstract":[{"type":"text","text":"This tutorial guides you through connecting your local data to synchronize to a cloud backend."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud#Add-a-Subscription","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/connectcloud#Add-a-Subscription"},"push":{"syntax":"","content":["amplify push"],"fileName":"Command","identifier":"push","type":"file","fileType":"","highlights":[{"line":1}]},"ToDoMainView2-2.swift":{"syntax":"swift","content":["import Amplify","import Combine","import SwiftUI","","\/\/\/ Homepage. Control Add button and TodoList.","public struct ToDoMainView: View {","    @EnvironmentObject var environment: ToDoEnvironment","","    let logger: Logger","    ","    public init(logger: Logger = DefaultLogger()) {","        self.logger = logger","    }","","    public var body: some View {","        NavigationView {","            if environment.toDoItems.isEmpty {","                ToDoBlankView()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","                    .sheet(isPresented: $environment.showingDetail) {","                        ToDoItemDetail()","                    }","            }","            else {","                ToDoList()","                    .navigationTitle(\"ToDo\")","                    .navigationBarTitleDisplayMode(.inline)","                    .toolbar {","                        ToolbarItem(placement: .navigationBarTrailing) {","                            Button(\"Add\") {","                                logger.info(\"Add new ToDo item\")","                                environment.selectedToDoItem = nil","                                environment.showingDetail = true","                            }","                        }","                    }","                    .edgesIgnoringSafeArea(.bottom)","            }","        }","    }","    ","    @State var todoSubscription: AnyCancellable?","    ","    func subscribeTodos() {","        self.todoSubscription","            = Amplify.DataStore.publisher(for: ToDoItem.self)","            .sink(receiveCompletion: { completion in","                logger.info(\"Subscription has been completed: \\(completion)\")","            }, receiveValue: { mutationEvent in","                logger.info(\"Subscription got this value: \\(mutationEvent)\")","","                do {","                    let todo = try mutationEvent.decodeModel(as: ToDoItem.self)","","                    switch mutationEvent.mutationType {","                    case \"create\":","                        logger.info(\"Created: \\(todo)\")","                    case \"update\":","                        logger.info(\"Updated: \\(todo)\")","                    case \"delete\":","                        logger.info(\"Deleted: \\(todo)\")","                    default:","                        break","                    }","","                } catch {","                    logger.error(\"Model could not be decoded: \\(error)\")","                }","            })","    }","}","","struct ToDoMainView_Previews: PreviewProvider {","    static var previews: some View {","        let env = ToDoEnvironment()","        env.saveToDoItem(toDoItem: ToDoItem(text: \"Eat breakfast\"))","        return ToDoMainView().environmentObject(env)","    }","}"],"fileName":"ToDoMainView.swift","identifier":"ToDoMainView2-2.swift","type":"file","fileType":"swift","highlights":[{"line":2},{"line":52},{"line":53},{"line":54},{"line":55},{"line":56},{"line":57},{"line":58},{"line":59},{"line":60},{"line":61},{"line":62},{"line":63},{"line":64},{"line":65},{"line":66},{"line":67},{"line":68},{"line":69},{"line":70},{"line":71},{"line":72},{"line":73},{"line":74},{"line":75},{"line":76},{"line":77},{"line":78},{"line":79},{"line":80},{"line":81}]},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/GenerateModel#Configure-Amplify-and-DataStore":{"role":"pseudoSymbol","title":"Configure Amplify and DataStore","abstract":[{"type":"text","text":"This tutorial guides you through generating model files and initializing Amplify."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/GenerateModel#Configure-Amplify-and-DataStore","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/generatemodel#Configure-Amplify-and-DataStore"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/ConnectCloud":{"role":"project","title":"Connect to the Cloud","estimatedTime":"10min","abstract":[{"type":"text","text":"This tutorial guides you through connecting your local data to synchronize to a cloud backend."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/ConnectCloud","kind":"project","type":"topic","url":"\/tutorials\/todosampleapptutorial\/connectcloud"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/Tutorial-Table-of-Contents/Cloud-Connection":{"role":"article","title":"Cloud Connection","abstract":[],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/Cloud-Connection","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/cloud-connection"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/Tutorial-Table-of-Contents/DataStore-Essentials":{"role":"article","title":"DataStore Essentials","abstract":[],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/DataStore-Essentials","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/datastore-essentials"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/Tutorial-Table-of-Contents/Set-Up-Fullstack-Project":{"role":"article","title":"Set Up Fullstack Project","abstract":[],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/Tutorial-Table-of-Contents\/Set-Up-Fullstack-Project","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/set-up-fullstack-project"},"doc://Amazon.ToDoSampleAppTutorial/tutorials/ToDoSampleAppTutorial/DataManipulation#Implement-the-ToDoEnvironment-Class":{"role":"pseudoSymbol","title":"Implement the ToDoEnvironment Class","abstract":[{"type":"text","text":"This tutorial guides you through creating, updating, querying, and deleting ToDoitem with DataStore."}],"identifier":"doc:\/\/Amazon.ToDoSampleAppTutorial\/tutorials\/ToDoSampleAppTutorial\/DataManipulation#Implement-the-ToDoEnvironment-Class","kind":"section","type":"section","url":"\/tutorials\/todosampleapptutorial\/datamanipulation#Implement-the-ToDoEnvironment-Class"}}}